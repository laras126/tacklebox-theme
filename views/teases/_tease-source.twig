{% extends 'teases/tease.twig' %}

{% block content %}

	<h5 class="tease__title--source"><a href="{{post.source_url}}" target="blank">{{post.post_title}}</a>
	{% for type in post.terms('source_type') %}
		<span class="meta">{{type.name}}</span>
	{% endfor %}
	</h5>

	{# TODO: this needs cleaning up - random <p> is printed above blurb #}
	{% if post.source_author or post.source_publication %}
	<p class="tease__meta meta tease__meta--source">
	{% if post.source_author %}
		{{post.source_author_link ? 'By <a href="' ~ post.source_author_link ~ '" target="blank">'}}
			{{post.source_author}}
		{{post.source_author_link ? '</a>'}}
	{% endif %}

	{% if post.source_publication %}
		{{post.source_author ? ',' }}
		{{post.source_publication_link ? '<a href="' ~ post.source_publication_link ~ '" target="blank">'}}
		{{post.source_publication}}
		{{post.source_publication_link ? '</a>'}}
	{% endif %}
	</p>
	{% endif %}


	{{post.source_blurb ? '<p class="tease__blurb--source meta-dark">' ~ post.source_blurb ~ '</p>'}}

	{% for type in post.terms('category') %}
		<p class="meta">{{type.name}}</p>
	{% endfor %}

	{{function('edit_post_link', 'Edit', '<span class="edit-link">', '</span>', post.ID)}}

{% endblock %}

{# TODO: Make this work #}
{# {% include 'utility/edit-link.twig' with { post : post } %} #}